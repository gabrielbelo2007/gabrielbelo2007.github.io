> Esse header é utilizado para indicar o **tipo de arquivo** (*Mime Type*) do recurso.

Como parte dos *Headers* das respostas do servidor e de requisição (especificamente em métodos como **POST/PUT** para descrever o corpo da mensagem), o `Content-Type`é um contrato de dados, que busca garantir a interpretação dos conteúdos de forma correta, eficiente e segura.

Esse é o mecanismo principal para que o navegador decida como processar dados recebidos, e isso é priorizado em relação a extensão, pois o *MIME Type* está relacionado a estrutura dos dados, enquanto a extensão do recurso é apenas uma nomenclatura (é ignorado na interpretação do navegador). 

-  **O que acontece quando ele não é enviado?**
	Por padrão, muitos navegadores realizam um processo chamado de *MIME-sniffing* no qual eles tentam avaliar o conteúdo do recurso e adivinhar um tipo, processando de acordo com esse valor autodeclarado. 

- **MIME-sniffing**
	É nesse ponto que reside sua principal falha de segurança. Em casos que esse processo não é desativado,  é possível realizar ataques de *Cross-Site Scripting* (XSS), onde recursos com tipos de mídia genéricos (`text/plain`) ou ausentes no `Content-Type`, contendo código JavaScript, podem ser "sniffados" pelo navegador, que, ao identificar o código executável, pode executá-lo automaticamente.

- **Como desativar esse processo?**
	A partir do header adicional `X-Content-Type-Options: nosniff`, esse processo de adivinhação do *MIME Type* do recurso é desativado, dessa maneira, o navegador é obrigado a confiar apenas no `Content-Type` fornecido pelo servidor. 

- **Esse header é sempre opcional?**
	Sim, é possível que o header `Content-Type` esteja ausente, mesmo com o  header adicional de segurança presente. Nesse caso, o navegador é forçado a tratar o recurso de forma mais segura e restritiva possível, como um `text/plain`, mas sem o perigo de executar.

---
## Funcionalidade

- **Performance e Padronização**
	- Cache e Otimização: O tipo de dado correto, permite ao navegador/servidor a utilizar estratégias de cache e de otimização de forma eficiente.
	
	- Parsing Eficiente: No caso do tipo de dado corresponder ao recurso enviado, torna o navegador mais eficiente no uso do parser pois o conteúdo estará pronto para ser interpretado baseado no seu *MIME Type*, em vez de forçar um parser incoerente com seu conteúdo de fato.

- **Segurança**
	- Em conjunto com o header adicional de segurança, que desabilita o *MIME Sniffing*, esse header é uma importante camada de segurança contra ataques de XSS.

## Diretivas

- **Charset**
	- É nesse header que é passado o conjunto de caracteres utilizado, o que é fundamento para a exibição correta de caracteres especiais, e evita os "caracteres quebrados".

- **Boundary**
	- Sempre que o *MIME Type* é do tipo *multipart*, ou seja, são várias seções de dados distintas presentes no mesmo recuso, é necessário o envio dessa diretiva.
	- Consiste na string utilizada como delimitador entre os tipos de dados distintos, respeitando o limite de 1 a 70 caracteres, e com a atenção na utilização de caracteres seguros e improváveis de aparecem no conteúdo do recurso.

---
## Exemplo

Não existe impedimento para que um arquivo PHP se comporte como CSS, se o seu *MIME Type*  passado para o `Content- Type` for `text/css` e  o arquivo PHP  respeitar a mesma estrutura de um arquivo CSS.

Contudo, mesmo que isso não aconteça (*MIME  Type* seja genérico) e esse arquivo PHP esteja sendo passando como CSS dentro da página HTML, isso será executado pelo navegador e se o arquivo estiver estruturado de forma semelhante, irá funcionar, porém isso estará relacionado a regra de tolerância a erros, e não é o comportamento padrão do contrato.

---

Referências: 
https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Reference/Headers/Content-Type
https://youtu.be/rh8Kgsex-Us (Cenário estranho, mas relacionado a regra de tolerância do HTTP)
